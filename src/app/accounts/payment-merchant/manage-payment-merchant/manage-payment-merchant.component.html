<div class="page-header-main">
  <div class="row align-items-center justify-content-between">
    <div class="col-md-auto col-sm-auto">
      <div class="content-header svg-icons">
        <h1>Manage POS Merchant Account</h1>
      </div>
    </div>
  </div>
  <div class="breadcrump-pages">
    <div class="crumbs-sec">
      <a [routerLink]="['/']">Dashboard</a> <i class="chevron-icon"></i> <a [routerLink]="['/payment-merchant']">POS Merchant Account</a> <i class="chevron-icon"></i>
      <span>Manage POS Merchant Account</span>
    </div>
  </div>
</div>



    <form [formGroup]="merchantAccountForm">
      <div class="row">
        <div class="col-md-9">
          <div class="section-boxed">
            <h5>Basic Details</h5>
            <div class="row">
              <div class="col-md-4">
                <div class="form-group">
                  <label class="text-dark">Name</label>
                  <input formControlName="nameEnglish" class="form-control w-100" type="text">
                </div>
              </div>
              <div class="col-md-4">
                <div class="form-group">
                  <label class="text-dark">Payment Merchant Type</label>
                  <mat-select class="form-control w-100" formControlName="posMerchantType">
                    <mat-option *ngFor="let item of merchantAccountTypes;let i=index" [value]="i">{{item}}</mat-option>
                  </mat-select>
                </div>
              </div>
              <div class="col-md-4">
                <div class="form-group">
                  <label class="text-dark">Merchant Identification Number</label>
                  <input formControlName="merchantIdentificationnumber" class="form-control w-100" type="text">
                </div>
              </div>
              <div class="col-md-4">
                <div class="form-group">
                  <label class="text-dark">Terminal Identification Number</label>
                  <input formControlName="terminalIdentificationNumber" class="form-control w-100" type="text">
                </div>
              </div>
              <div class="col-md-4">
                <div class="form-group">
                  <label class="text-dark">Portal Url</label>
                  <input formControlName="portalUrl" class="form-control w-100" type="text">
                </div>
              </div>
              <div class="col-md-4">
                <div class="form-group">
                  <label class="text-dark">Portal User Name</label>
                  <input formControlName="portalUsername" class="form-control w-100" type="text">
                </div>
              </div>
              <div class="col-md-4">
                <div class="form-group">
                  <label class="text-dark">Portal Password</label>
                  <input formControlName="portalPassword" class="form-control w-100" type="text">
                </div>
              </div>
              <div class="col-md-4">
                <div class="form-group">
                  <label class="text-dark">Device Count</label>
                  <input formControlName="deviceCount" class="form-control w-100" type="text">
                </div>
              </div>
              <div class="col-md-4">
                <div class="form-group">
                  <label class="text-dark">Contact Person Name</label>
                  <input formControlName="contactPersonName" class="form-control w-100" type="text">
                </div>
              </div>
              <div class="col-md-3">
                <div class="form-group">
                  <label class="text-dark">Contact Person Phone</label>
                  <input formControlName="contactPersonPhone" class="form-control w-100" type="text">
                </div>
              </div>
              <div class="col-md-3">
                <div class="form-group">
                  <label class="text-dark">Contact Person Email</label>
                  <input formControlName="contactPersonEmail" class="form-control w-100" type="text">
                </div>
              </div>
              <div class="col-md-3">
                <div class="form-group">
                  <label class="text-dark">Support Email</label>
                  <input formControlName="supportEmail" class="form-control w-100" type="text">
                </div>
              </div>
              <div class="col-md-3">
                <div class="form-group">
                  <label class="text-dark">Support Phone</label>
                  <input formControlName="supportPhone" class="form-control w-100" type="text">
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="col-md-3">
          <div class="row">
            <div class="col-md-12 col-md-3">
              <mat-card class="cus-mat-card text-center">
                <input hidden (change)="onFileSelect($event)" #fileInput name="logo" type="file" name="Profile Photo"
                  fxFlex="30">
                <img *ngIf="imgSrc" class="full-width" [src]="imgSrc" />
                <img *ngIf="!imgSrc" class="full-width" src="../../../assets/images/dummy.jpg" />
                <mat-card-actions>
                  <button type="button" *ngIf="!imgSrc" class="btn btn-success btn-sm m-right-10 rounded-pill"
                    (click)="fileInput.click()">
                    <i class="far fa-image"></i> {{'COMMON.ADD_IMAGE' | translate}}</button>
                  <button type="button" *ngIf="imgSrc" class="btn btn-success btn-sm m-right-10 rounded-pill"
                    (click)="fileInput.click()">
                    <i class="far fa-image"></i> {{'COMMON.CHANGE_IMAGE' | translate}}</button>
                  <button *ngIf="imgSrc" type="button" (click)="onRemoveImage()" class="btn btn-danger btn-sm rounded-pill">
                    <i class="fas fa-trash-alt"></i> {{'COMMON.REMOVE_IMAGE' | translate}}</button>
                </mat-card-actions>
              </mat-card>
            </div>
          </div>
        </div>
      </div>

    </form>

    <div class="section-boxed">
      <div class="row">
        <div class="col-md-6 content-flex">
          <h5>Bank Details</h5>
        </div>
        <div class="col-md-6">
          <div class="text-right add-button-modal">
            <button class="manage-add-btn" mat-mini-fab color="primary" (click)="openBankDialog()">
              <mat-icon>add</mat-icon>
            </button>
          </div>
        </div>
      </div>
      <div class="posmerchant-table table-responsive">
        <table class="table table-bordered table-hover">
          <thead>
            <tr>
              <th>Bank Name</th>
              <th>Branch</th>
              <th>Account No</th>
              <th>Default Bank</th>
              <th>Action</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let item of posMerchantbanks">
              <td>{{item.nameEnglish}}</td>
              <td>{{item.namePrefixEnglish}}</td>
              <td>{{item.accountNo}}</td>
              <td class="text-center">
                <mat-slide-toggle class="example-margin" [(ngModel)]="item.isDefaultBank"  (change)="setDefaultBank(item)"> </mat-slide-toggle>
              </td>
              <td class="action-button text-right">
                                <button  mat-mini-fab color="primary" (click)="openDetailDialog('merchantBank',item.accountUUID)">
                  <mat-icon>remove_red_eye</mat-icon>
                </button>
                <button mat-mini-fab color="warn" (click)="deleteBank(item.accountUUID)">
                  <mat-icon>delete</mat-icon>
                </button>
              </td>
            </tr>
            <tr  class="text-center" *ngIf="posMerchantbanks.length<=0">
              <td colspan="5">{{'COMMON.NO_DATA_FOUND' | translate}}</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
    <div class="section-boxed">
      <div class="row">
        <div class="col-md-6 content-flex">
          <h5>Device Details</h5>
        </div>
        <div class="col-md-6">
          <div class="text-right add-button-modal">
            <button class="manage-add-btn" mat-mini-fab color="primary" (click)="openDeviceMapDialog()" [disabled]="posMerchantbanks.length<=0">
              <mat-icon>add</mat-icon>
            </button>
          </div>
        </div>
      </div>
      <div class="posmerchant-table table-responsive">
        <table class="table table-bordered table-hover">
          <thead>
            <tr>
              <th>Manufacture</th>
              <th>Model No</th>
              <th>Device ID</th>
              <th>Bank</th>
              <th>Action</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let item of posMerchantDevices">
              <td>{{item.brandName}}</td>
              <td>{{item.deviceModel}}</td>
              <td>{{item.serialNo}}</td>
              <td>{{item.bankName}}</td>
              <td class="action-button">
                <button mat-mini-fab color="primary" (click)="openDetailDialog('merchantDevice',item.posDeviceUUID)">
                  <mat-icon>remove_red_eye</mat-icon>
                </button>
                <button mat-mini-fab color="warn" (click)="deletePosDevice(item.posDeviceUUID)">
                  <mat-icon>delete</mat-icon>
                </button>
              </td>
            </tr>
            <tr class="text-center"  *ngIf="posMerchantDevices.length<=0">
              <td colspan="5">{{'COMMON.NO_DATA_FOUND' | translate}}</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
    <div class="row section-boxed m-1 p-3">
      <div class="col-md-12 m-bottom-40 text-right">
        <button type="submit" class="btn blue-btn mr-2 m-left-10" (click)="save()">
          <i class="icon61"></i> Save
        </button>
        <button [routerLink]="['/payment-merchant']" type="button" class="btn btn-danger">
          <i class="fas fa-times"></i> Cancel
        </button>
      </div>
    </div>
