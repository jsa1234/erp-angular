<div class="page-header-main">
  <div class="row align-items-center justify-content-between">
    <div class="col-md-auto col-sm-auto col">
      <div class="content-header svg-icons"
        [ngClass]="{'content-header-ar':translationService.getSelectedLanguage()=='ar'}">
        <h1><i class="icon9"></i> <span>{{'SIDEBAR.SUPPLIER' | translate}}</span> </h1>
      </div>
    </div>
    <div  class="col-md-auto col-sm-auto col-auto">
      <button *hasClaim="'account_supplier_create_supplier'" class="btn blue-btn btn-sm m-right-10" [routerLink]="['/supplier/manage/addItem']">
        <i class="fas fa-plus"></i> {{'SUPPLIER.ADD_SUPPLIER' | translate}}
      </button>
    </div>
  </div>
  <div class="breadcrump-pages" [ngClass]="{'breadcrump-pages-ar':translationService.getSelectedLanguage()=='ar'}">
    <div class="crumbs-sec">
      <a [routerLink]="['/']">{{'SIDEBAR.DASHBOARD' | translate}}</a> / <span>{{'SIDEBAR.SUPPLIER' | translate}}</span>
    </div>
  </div>
</div>
<div class="table-responsive">
  <table class="table table-bordered table-hover" mat-table [dataSource]="dataSource" matSort multiTemplateDataRows
    matSortActive="nameEngilsh">
    <ng-container matColumnDef="action">
      <th class="table-column-50" mat-header-cell *matHeaderCellDef>
      </th>
      <td class="table-column-50" mat-cell *matCellDef="let supplier">

        <button *hasClaim="['account_supplier_delete_supplier', 'account_supplier_edit_supplier']" class="ml-4"

          mat-icon-button [matMenuTriggerFor]="menu" aria-label="Action">
          <mat-icon>more_vert</mat-icon>
        </button>
        <mat-menu #menu="matMenu">
          <button *hasClaim="'account_supplier_edit_supplier'" (click)="editSupplier(supplier.accountUUID)" mat-menu-item>
            <mat-icon>edit</mat-icon>
            <span>{{'COMMON.EDIT' | translate}}</span>
          </button>
          <button *hasClaim="'account_supplier_delete_supplier'" mat-menu-item (click)="deleteSupplier(supplier)">
            <mat-icon>delete</mat-icon>
            <span>{{'COMMON.DELETE' | translate}}</span>
          </button>

        </mat-menu>
      </td>
    </ng-container>
    <ng-container matColumnDef="nameEnglish">
      <th class="table-column-100" mat-header-cell *matHeaderCellDef mat-sort-header>{{'COMMON.NAME_ENGLISH' | translate}} </th>
      <td class="table-column-100" mat-cell *matCellDef="let supplier">{{supplier.nameEnglish}}
      </td>
    </ng-container>
    <ng-container matColumnDef="nameSecondLanguage">
      <th class="table-column-100 text-right" mat-header-cell *matHeaderCellDef mat-sort-header> {{'COMMON.NAME_ARABIC' | translate}} </th>
      <td class="table-column-100 text-right" mat-cell *matCellDef="let supplier">{{supplier.nameSecondLanguage}}
      </td>
    </ng-container>
    <ng-container matColumnDef="email">
      <th class="table-column-100" mat-header-cell *matHeaderCellDef mat-sort-header> {{'COMMON.EMAIL' | translate}}
      </th>
      <td class="table-column-100" mat-cell *matCellDef="let supplier"> {{supplier.email}} </td>
    </ng-container>
    <ng-container matColumnDef="Mobile">
      <th class="table-column-100" mat-header-cell *matHeaderCellDef mat-sort-header> {{'COMMON.MOBILE' | translate}}
      </th>
      <td class="table-column-100" mat-cell *matCellDef="let supplier">{{supplier.mobileCountryCode}}
        {{supplier.mobile}} </td>
    </ng-container>
    <ng-container matColumnDef="vat">
      <th class="table-column-100" mat-header-cell *matHeaderCellDef mat-sort-header> {{'COMMON.GST_NO' | translate}} </th>
      <td class="table-column-100" mat-cell *matCellDef="let supplier"> {{supplier.gstVatNo}} </td>
    </ng-container>
    <ng-container matColumnDef="reg-no">
      <th class="table-column-100" mat-header-cell *matHeaderCellDef> {{'COMMON.REG_NO' | translate}}</th>
      <td class="table-column-100" mat-cell *matCellDef="let supplier"> {{supplier.regCrNo}}</td>
    </ng-container>
    <ng-container matColumnDef="district">
      <th class="table-column-100" mat-header-cell *matHeaderCellDef mat-sort-header>{{'COMMON.DISTRICT' | translate}}</th>
      <td class="table-column-100" mat-cell *matCellDef="let supplier">
     {{translationService.getSelectedLanguage() == 'en'?supplier?.districtObject?.nameEnglish:supplier?.districtObject?.nameSecondLanguage}}
      </td>
    </ng-container>
    <ng-container matColumnDef="state">
      <th class="table-column-100" mat-header-cell *matHeaderCellDef mat-sort-header>{{'COMMON.STATE' | translate}}</th>
      <td class="table-column-100" mat-cell *matCellDef="let supplier">
        {{translationService.getSelectedLanguage() == 'en'?supplier?.stateObject?.nameEnglish:supplier?.stateObject?.nameSecondLanguage}}
      </td>
    </ng-container>
    <ng-container matColumnDef="sales-man">
      <th class="table-column-100" mat-header-cell *matHeaderCellDef mat-sort-header>{{'COMMON.SALESMAN' | translate}}</th>
      <td class="table-column-100" mat-cell *matCellDef="let supplier"> {{supplier.salesMan}} </td>
    </ng-container>


    <ng-container matColumnDef="action-Search">
      <th class="pr-5 table-column-50" mat-header-cell *matHeaderCellDef> </th>
    </ng-container>
    <ng-container matColumnDef="nameEnglish-Search">
      <th mat-header-cell *matHeaderCellDef>
        <input type="text" placeholder="Name English" class="form-control" [(ngModel)]="NameFilter">
      </th>
    </ng-container>
    <ng-container matColumnDef="nameSecondLanguage-Search">
      <th mat-header-cell *matHeaderCellDef>
        <input type="text" placeholder="Name Arabic" class="form-control" [(ngModel)]="NameArFilter">
      </th>
    </ng-container>
    <ng-container matColumnDef="email-Search">
      <th mat-header-cell *matHeaderCellDef>
        <input type="text" placeholder="Email Address" class="form-control" [(ngModel)]="EmailFilter">
      </th>
    </ng-container>
    <ng-container matColumnDef="mobile-Search">
      <th mat-header-cell *matHeaderCellDef>
        <input type="text" placeholder="Mobile Number" class="form-control" [(ngModel)]="MobileOrPhoneFilter">
      </th>
    </ng-container>
    <ng-container matColumnDef="vat-Search">
      <th mat-header-cell *matHeaderCellDef></th>
    </ng-container>
    <ng-container matColumnDef="regNo-Search">
      <th mat-header-cell *matHeaderCellDef>
        <!-- <input type="text" placeholder="Reg.No" class="form-control" [(ngModel)]="WebsiteFilter"> -->
      </th>
    </ng-container>
    <ng-container matColumnDef="district-Search">
      <th mat-header-cell *matHeaderCellDef>
        <!-- <input type="text" class="form-control" [formControl]="countryControl" [matAutocomplete]="auto">
        <mat-autocomplete [autoActiveFirstOption]="true" (optionSelected)='CountryFilter = $event.option.value'
          #auto="matAutocomplete">
          <mat-option value="">{{'NONE' | translate}}</mat-option>
          <mat-option *ngFor="let cont of filteredCountryList | async" [value]="cont.countryName">
            {{cont.countryName}}
          </mat-option>
        </mat-autocomplete> -->
      </th>
    </ng-container>
    <ng-container matColumnDef="state-Search">
      <th mat-header-cell *matHeaderCellDef>
        <!-- <input type="text" class="form-control" [formControl]="countryControl" [matAutocomplete]="auto">
        <mat-autocomplete [autoActiveFirstOption]="true" (optionSelected)='CountryFilter = $event.option.value'
          #auto="matAutocomplete">
          <mat-option value="">{{'NONE' | translate}}</mat-option>
          <mat-option *ngFor="let cont of filteredCountryList | async" [value]="cont.countryName">
            {{cont.countryName}}
          </mat-option>
        </mat-autocomplete> -->
      </th>
    </ng-container>
    <ng-container matColumnDef="salesMan-Search">
      <th mat-header-cell *matHeaderCellDef></th>
    </ng-container>

    <ng-container matColumnDef="footer">
      <td mat-footer-cell colspan="10" *matFooterCellDef>
        <mat-paginator [length]="supplierResource.totalCount" [pageSize]="supplierResource.pageSize"
          [pageSizeOptions]="[20, 30,50]">
        </mat-paginator>
      </td>
    </ng-container>
    <tr mat-header-row *matHeaderRowDef="displayedColumns;sticky: true"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
    <tr mat-header-row *matHeaderRowDef="searchColumns;sticky: true"
      class="example-second-header-row">
    </tr>
    <tr mat-footer-row *matFooterRowDef="columnsToDisplay;sticky: true"></tr>
  </table>
  <ng-container *ngIf="dataSource.count === 0">
    <div class="row">
      <div class="col-sm-12 ml-4 mt-3 text-center">
        <label class="font-weight-bold"> {{'COMMON.NO_DATA_FOUND' | translate}}</label>
      </div>
    </div>
  </ng-container>
</div>
<div class="loading-shade" *ngIf="dataSource.loading$ | async">
  <mat-spinner></mat-spinner>
</div>
